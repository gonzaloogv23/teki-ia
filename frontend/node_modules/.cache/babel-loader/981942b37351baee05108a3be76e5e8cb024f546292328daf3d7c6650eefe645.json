{"ast":null,"code":"import React,{useState}from'react';import{ref,uploadBytesResumable,getDownloadURL}from'firebase/storage';import{addDoc,collection}from'firebase/firestore';import{db,storage}from'../firebaseConfig';import CargarPdfForm from'./CargarPdfForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CargarPdfComponent=()=>{const[pdfFile,setPdfFile]=useState(null);const[uploadProgress,setUploadProgress]=useState(0);const handlePdfChange=event=>{setPdfFile(event.target.files[0]);};const enviarPdf=async event=>{event.preventDefault();if(pdfFile){const storageRef=ref(storage,`pdfs/${pdfFile.name}`);const uploadTask=uploadBytesResumable(storageRef,pdfFile);uploadTask.on('state_changed',snapshot=>{const progress=snapshot.bytesTransferred/snapshot.totalBytes*100;setUploadProgress(progress);},error=>{console.error('Error al subir el archivo:',error);},async()=>{const downloadURL=await getDownloadURL(uploadTask.snapshot.ref);await addDoc(collection(db,'pdfFiles'),{name:pdfFile.name,url:downloadURL,timestamp:new Date()});console.log('Archivo subido con éxito:',downloadURL);setPdfFile(null);setUploadProgress(0);});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CargarPdfForm,{pdfFile:pdfFile,setPdfFile:setPdfFile,handlePdfChange:handlePdfChange,enviarPdf:enviarPdf}),uploadProgress>0&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Progreso de subida: \",uploadProgress,\"%\"]})]});};export default CargarPdfComponent;","map":{"version":3,"names":["React","useState","ref","uploadBytesResumable","getDownloadURL","addDoc","collection","db","storage","CargarPdfForm","jsx","_jsx","jsxs","_jsxs","CargarPdfComponent","pdfFile","setPdfFile","uploadProgress","setUploadProgress","handlePdfChange","event","target","files","enviarPdf","preventDefault","storageRef","name","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","error","console","downloadURL","url","timestamp","Date","log","children"],"sources":["C:/Users/Gonza/Desktop/tekiste/frontend/src/components/CargarPdfComponent.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\r\nimport { addDoc, collection } from 'firebase/firestore';\r\nimport { db, storage } from '../firebaseConfig';\r\nimport CargarPdfForm from './CargarPdfForm';\r\n\r\nconst CargarPdfComponent = () => {\r\n  const [pdfFile, setPdfFile] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n\r\n  const handlePdfChange = (event) => {\r\n    setPdfFile(event.target.files[0]);\r\n  };\r\n\r\n  const enviarPdf = async (event) => {\r\n    event.preventDefault();\r\n    if (pdfFile) {\r\n      const storageRef = ref(storage, `pdfs/${pdfFile.name}`);\r\n      const uploadTask = uploadBytesResumable(storageRef, pdfFile);\r\n\r\n      uploadTask.on('state_changed', \r\n        (snapshot) => {\r\n          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n          setUploadProgress(progress);\r\n        }, \r\n        (error) => {\r\n          console.error('Error al subir el archivo:', error);\r\n        }, \r\n        async () => {\r\n          const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\r\n          await addDoc(collection(db, 'pdfFiles'), {\r\n            name: pdfFile.name,\r\n            url: downloadURL,\r\n            timestamp: new Date()\r\n          });\r\n          console.log('Archivo subido con éxito:', downloadURL);\r\n          setPdfFile(null);\r\n          setUploadProgress(0);\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <CargarPdfForm\r\n        pdfFile={pdfFile}\r\n        setPdfFile={setPdfFile}\r\n        handlePdfChange={handlePdfChange}\r\n        enviarPdf={enviarPdf}\r\n      />\r\n      {uploadProgress > 0 && <p>Progreso de subida: {uploadProgress}%</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CargarPdfComponent;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,GAAG,CAAEC,oBAAoB,CAAEC,cAAc,KAAQ,kBAAkB,CAC5E,OAASC,MAAM,CAAEC,UAAU,KAAQ,oBAAoB,CACvD,OAASC,EAAE,CAAEC,OAAO,KAAQ,mBAAmB,CAC/C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgB,cAAc,CAAEC,iBAAiB,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CAEvD,KAAM,CAAAkB,eAAe,CAAIC,KAAK,EAAK,CACjCJ,UAAU,CAACI,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACnC,CAAC,CAED,KAAM,CAAAC,SAAS,CAAG,KAAO,CAAAH,KAAK,EAAK,CACjCA,KAAK,CAACI,cAAc,CAAC,CAAC,CACtB,GAAIT,OAAO,CAAE,CACX,KAAM,CAAAU,UAAU,CAAGvB,GAAG,CAACM,OAAO,CAAE,QAAQO,OAAO,CAACW,IAAI,EAAE,CAAC,CACvD,KAAM,CAAAC,UAAU,CAAGxB,oBAAoB,CAACsB,UAAU,CAAEV,OAAO,CAAC,CAE5DY,UAAU,CAACC,EAAE,CAAC,eAAe,CAC1BC,QAAQ,EAAK,CACZ,KAAM,CAAAC,QAAQ,CAAID,QAAQ,CAACE,gBAAgB,CAAGF,QAAQ,CAACG,UAAU,CAAI,GAAG,CACxEd,iBAAiB,CAACY,QAAQ,CAAC,CAC7B,CAAC,CACAG,KAAK,EAAK,CACTC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CAAC,CACD,SAAY,CACV,KAAM,CAAAE,WAAW,CAAG,KAAM,CAAA/B,cAAc,CAACuB,UAAU,CAACE,QAAQ,CAAC3B,GAAG,CAAC,CACjE,KAAM,CAAAG,MAAM,CAACC,UAAU,CAACC,EAAE,CAAE,UAAU,CAAC,CAAE,CACvCmB,IAAI,CAAEX,OAAO,CAACW,IAAI,CAClBU,GAAG,CAAED,WAAW,CAChBE,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CAAC,CACFJ,OAAO,CAACK,GAAG,CAAC,2BAA2B,CAAEJ,WAAW,CAAC,CACrDnB,UAAU,CAAC,IAAI,CAAC,CAChBE,iBAAiB,CAAC,CAAC,CAAC,CACtB,CACF,CAAC,CACH,CACF,CAAC,CAED,mBACEL,KAAA,QAAA2B,QAAA,eACE7B,IAAA,CAACF,aAAa,EACZM,OAAO,CAAEA,OAAQ,CACjBC,UAAU,CAAEA,UAAW,CACvBG,eAAe,CAAEA,eAAgB,CACjCI,SAAS,CAAEA,SAAU,CACtB,CAAC,CACDN,cAAc,CAAG,CAAC,eAAIJ,KAAA,MAAA2B,QAAA,EAAG,sBAAoB,CAACvB,cAAc,CAAC,GAAC,EAAG,CAAC,EAChE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}